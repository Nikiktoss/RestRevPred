{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block title %}Edit Profile Page | Restaurant Revenue Prediction{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'edit_profile_styles.css' %}">
{% endblock %}

{% block header %}
    <header class="d-flex flex-wrap justify-content-center py-3 border-bottom">
        <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none">
        <svg class="bi me-2" width="40" height="32"><use xlink:href="#bootstrap"></use></svg>
        <span class="app_logo">RRP</span>
        </a>
        <ul class="nav nav-pills">
        <li class="nav-item"><a href="{% url 'main_page' %}" class="nav-link">Main</a></li>
        <li class="nav-item"><a href="{% url 'profile_page' user.slug %}" class="nav-link">Profile</a></li>
        <li class="nav-item"><a href="{% url 'logout' %}" class="nav-link">Sign out</a></li>
        </ul>
    </header>
{% endblock %}

{% block content %}
    <form method="post" enctype="multipart/form-data">
        <div class="form_content">
            {% csrf_token %}
             {% if form.errors %}
                {% for error in form.non_field_errors %}
                    <div class="alert alert-danger">
                        <strong>{{ error|escape }}</strong>
                        <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                    </div>
                {% endfor %}
            {% endif %}
            <div class="profile_edit_content">
                <div class="form_element">
                    <label id="{{ form.photo.id_for_label }}" class="label_tag">{{ form.photo.label }}</label><br>
                    {{ form.photo }}
                    {% for error in form.photo.errors %}
                        <div class="alert alert-danger">
                            <strong>{{ error|escape }}</strong>
                            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                        </div>
                    {% endfor %}
                    {% if user.photo %}
                        <label class="label_tag">Current photo</label>
                        <img src="{{ user.photo.url }}" style="width: 100%; height: 400px;">
                    {% else %}
                        <div class="no_photo">No photo yet</div>
                    {% endif %}
                </div>
                <div class="form_element">
                    <label id="{{ form.username.id_for_label }}" class="label_tag">{{ form.username.label }}</label><br>
                    {{ form.username }}
                    {% for error in form.username.errors %}
                        <div class="alert alert-danger">
                            <strong>{{ error|escape }}</strong>
                            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                        </div>
                    {% endfor %}
                </div>
            </div>

            <div class="profile_edit_data">
                <div class="form_element">
                    <label id="{{ form.first_name.id_for_label }}" class="label_tag">{{ form.first_name.label }}</label><br>
                    {{ form.first_name }}
                    {% for error in form.first_name.errors %}
                        <div class="alert alert-danger">
                            <strong>{{ error|escape }}</strong>
                            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                        </div>
                    {% endfor %}
                </div>
                <div class="form_element">
                    <label id="{{ form.last_name.id_for_label }}" class="label_tag">{{ form.last_name.label }}</label><br>
                    {{ form.last_name }}
                    {% for error in form.last_name.errors %}
                        <div class="alert alert-danger">
                            <strong>{{ error|escape }}</strong>
                            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                        </div>
                    {% endfor %}
                </div>
                <div class="form_element">
                    <label id="{{ form.email.id_for_label }}" class="label_tag">{{ form.email.label }}</label><br>
                    {{ form.email }}
                    {% for error in form.email.errors %}
                        <div class="alert alert-danger">
                            <strong>{{ error|escape }}</strong>
                            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                        </div>
                    {% endfor %}
                </div>
                <div class="form_element">
                    <label id="{{ form.birth_date.id_for_label }}" class="label_tag">{{ form.birth_date.label }}</label><br>
                    {{ form.birth_date }}
                    {% for error in form.birth_date.errors %}
                        <div class="alert alert-danger">
                            <strong>{{ error|escape }}</strong>
                            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                        </div>
                    {% endfor %}
                </div>
                <div class="form_element">
                    <label id="{{ form.company.id_for_label }}" class="label_tag">{{ form.company.label }}</label><br>
                    {{ form.company }}
                    {% for error in form.company.errors %}
                        <div class="alert alert-danger">
                            <strong>{{ error|escape }}</strong>
                            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                        </div>
                    {% endfor %}
                </div>
                <div class="form_element">
                    <label id="{{ form.additional_data.id_for_label }}" class="label_tag">{{ form.additional_data.label }}</label><br>
                    {{ form.additional_data }}
                    {% for error in form.additional_data.errors %}
                        <div class="alert alert-danger">
                            <strong>{{ error|escape }}</strong>
                            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                        </div>
                    {% endfor %}
                </div>
                <div class="form_buttons">
                    <button type="submit" class="btn-custom-submit" id="custom_submit_button">Confirm</button>
                    <div class="no_buttons" style="width: 35%; height: 100%; display: flex; align-items: center; justify-content: space-between;">
                        <button type="reset" class="btn-custom-reset" id="custom_reset_button">Reset</button>
                        <a class="btn btn-secondary" href="{% url 'profile_page' user.slug %}" role="button" style="width: 100px; height: 100%; font-family: 'Montserrat'; font-size: 20px; border: 1px solid;">Exit</a>
                    </div>
                </div>
            </div>
        </div>
    </form>
{% endblock %}
